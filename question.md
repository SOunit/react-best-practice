# 依存関係 1

## A は B に依存している

### 依存 1

- A は B の影響を受ける
- B に変更があれば、A も変更する
- 依存元は A, 依存先は B

### 依存 2

- A は B を import する
- A は B に依存してもよい = A は B を import してもよい

## UserPage は User に依存している

### 依存 1

- UserPage は User の変更の影響を受ける
- User に変更があれば、UserPage も変更する
- 依存元は UserPage, 依存先は User

### 依存 2

- UserPage は User を import する
- UserPage は User に依存してもよい = UserPage は User を import してもよい

## 参考 URL

https://naruport.com/blog/2020/2/10/programming-dependency/

# DI(依存注入)

## page URL

https://e-words.jp/w/%E4%BE%9D%E5%AD%98%E6%80%A7%E6%B3%A8%E5%85%A5.html

## summary

- 依存性注入とは、コンピュータプログラムのデザインパターンの一つ
- オブジェクトなどの間に生じる依存関係をオブジェクト内のコードに直接記述せず、外部から何らかの形で与えるようにする手法

# detail

- あるオブジェクト UserPage がオブジェクト User を呼び出してその機能を利用する場合、UserPage は User に依存しているという。この関係を素朴に記述しようとすると、UserPage の内部で User を生成して呼び出すコードを記述する形となる。UserPage と User の関係は固定的になり、UserPage が User を利用していることは外部からは分かりにくくなる。

- 依存性注入を利用する場合、UserPage の内部に User を直接記述せず、メソッドの引数などの形で受け取って呼び出す形とし、UserPage を呼び出す側が User（に相当するオブジェクト）を与えて利用させる。これにより、UserPage と User の依存関係は外部から任意に指定・変更できるようになり、User の代わりに同じインターフェースを実装した User'を与えたり、User のように振る舞うモックを与えて UserPage のみを対象とする単体テストを行ったりすることができる。

- 依存性注入ではオブジェクト UserPage に当たる依存「する」側のことをクライアント、User に当たる依存「される」側をサービスという。注入をどのように行うかは様々な方式があり、サービスをクライアントのコンストラクタ引数として渡すコンストラクタインジェクション（コンストラクタ注入）、setter メソッドを用いるセッターインジェクション（setter 注入）などがよく知られている。DI コンテナなど専用のツールを利用すれば、依存性をプログラム自体ではなく外部の設定ファイルなどに記述しておくこともできる。
